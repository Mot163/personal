import{M as b}from"./MoManagement.34faeadf.js";import y from"./MoTagAddOrUpdate.2080c76d.js";import{t as V}from"./tag-service.mod.774d7a87.js";import{m as w}from"./management-view-utils.mod.1f11836e.js";import{_ as x}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.5b561da9.js";const N={class:"mo-tag-management"},M={__name:"MoTagManagement",setup(k){const l=Vue.ref(),r=Vue.ref(),s=Vue.ref(0),{model:i,listData:u,handleOpenAddOrUpdateDialog:d,handleSearch:p,handleAddOrUpdate:_,handleRemove:h,handleRemoveBatch:g,refresh:c}=w.create({service:V,addOrUpdateComponent:r,listComponent:l});Vue.watch(u,()=>{s.value++});const f=e=>{V.status(e.id).then(o=>{o.data.status!==e.status?(e.status=!e.status,ElementPlus.ElMessage({message:"\u6807\u7B7E\u72B6\u6001\u66F4\u65B0\u5931\u8D25!",type:"error"})):ElementPlus.ElMessage({message:e.status?"\u5DF2\u542F\u7528":"\u5DF2\u7981\u7528",type:e.status?"success":"error"})}).catch(o=>{e.status=!e.status})};return(async()=>c(1))(),(e,o)=>{const t=Vue.resolveComponent("el-table-column"),C=Vue.resolveComponent("el-switch"),m=Vue.resolveComponent("el-button"),v=Vue.resolveComponent("el-table");return Vue.openBlock(),Vue.createElementBlock("div",N,[Vue.createVNode(b,{model:Vue.unref(i),onAdd:o[0]||(o[0]=a=>Vue.unref(d)()),onRemoveBatch:Vue.unref(g),onSearch:Vue.unref(p),onChangePage:Vue.unref(c)},{list:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createBlock(v,{class:"mo-tag-management__list",ref_key:"tableComponent",ref:l,key:s.value,data:Vue.unref(u),height:"100%"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{type:"selection",width:"55"}),Vue.createVNode(t,{label:"#",type:"index",width:"50"}),Vue.createVNode(t,{label:"\u540D\u79F0",property:"name",width:"120"}),Vue.createVNode(t,{label:"\u63CF\u8FF0",property:"description","show-overflow-tooltip":""}),Vue.createVNode(t,{label:"\u5305\u542B\u6587\u7AE0\u6570\u91CF",property:"articleAmount",align:"center",width:"130"}),Vue.createVNode(t,{label:"\u72B6\u6001",property:"status",align:"center",width:"120"},{default:Vue.withCtx(a=>[Vue.createVNode(C,{class:"mo-tag-management__status ml-2",modelValue:a.row.status,"onUpdate:modelValue":n=>a.row.status=n,onChange:n=>f(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),Vue.createVNode(t,{label:"\u64CD\u4F5C",align:"center",width:"140"},{default:Vue.withCtx(a=>[Vue.createVNode(m,{type:"primary",size:"small",onClick:n=>Vue.unref(d)(a.row.id)},{default:Vue.withCtx(()=>[Vue.createTextVNode("\u66F4\u65B0")]),_:2},1032,["onClick"]),Vue.createVNode(m,{type:"danger",size:"small",onClick:n=>Vue.unref(h)(a.row.id)},{default:Vue.withCtx(()=>[Vue.createTextVNode("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]))]),dialog:Vue.withCtx(()=>[Vue.createVNode(y,{ref_key:"tagAddOrUpdateComponent",ref:r,onConfirm:Vue.unref(_)},null,8,["onConfirm"])]),_:1},8,["model","onRemoveBatch","onSearch","onChangePage"])])}}},P=x(M,[["__scopeId","data-v-33a4cbb9"]]);export{P as default};
