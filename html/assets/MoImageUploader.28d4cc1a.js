import{a as r,s as y}from"./index.5b561da9.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";const C=r.defaults.baseURL,i={upload:`${C}/image/upload/`},x={upload:async o=>{const l=new FormData;return l.append("file",o),r.post(i.upload,l,{"Content-Type":"multipart/form-data"})}};const L={class:"mo-image-uploader"},U={__name:"MoImageUploader",props:{imageFileList:{type:Array,default:[]},multiple:{type:Boolean,default:!1}},emits:["update:imageFileList"],setup(o,{emit:l}){const s=o;Vue.useCssVars(e=>({"19253e9d":c.uploadDisplay}));const a=Vue.ref(""),p={Authorization:"Bearer "+y.get("token")},c=Vue.reactive({uploadDisplay:Vue.computed(()=>!s.multiple&&s.imageFileList.length>0?"none":"inline-flex")}),u=Vue.computed({get:()=>s.imageFileList,set:e=>l("update:imageFileList",e)}),d=e=>e.size/1024/1024>100?(ElementPlus.ElMessage({message:"\u56FE\u7247\u6587\u4EF6\u4E0D\u80FD\u5927\u4E8E100MB!",type:"error"}),!1):!0,m=(e,t)=>{t.url2=e.data.fileURL},V=e=>{console.log(e.message),ElementPlus.ElMessage({message:e.message,type:"error"})},f=e=>{a.value=e.url};return(e,t)=>{const _=Vue.resolveComponent("el-icon"),g=Vue.resolveComponent("el-upload"),v=Vue.resolveComponent("el-image-viewer");return Vue.openBlock(),Vue.createElementBlock("div",L,[Vue.createVNode(g,{"list-type":"picture-card","file-list":Vue.unref(u),"onUpdate:file-list":t[0]||(t[0]=n=>Vue.isRef(u)?u.value=n:null),action:Vue.unref(i).upload,headers:p,multiple:o.multiple,"before-upload":d,"on-success":m,"on-error":V,"on-preview":f},{default:Vue.withCtx(()=>[Vue.createVNode(_,null,{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlusIconsVue.Plus))]),_:1})]),_:1},8,["file-list","action","multiple"]),(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[a.value!==""?(Vue.openBlock(),Vue.createBlock(v,{key:0,"url-list":[a.value],onClose:t[1]||(t[1]=n=>a.value="")},null,8,["url-list"])):Vue.createCommentVNode("",!0)]))])}}},w=B(U,[["__scopeId","data-v-911d5f03"]]);export{w as M,x as i};
