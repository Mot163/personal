import{M as N}from"./MoManagement.34faeadf.js";import b from"./MoCategoryAddOrUpdate.accf9a24.js";import{c as V}from"./category-service.mod.aa5a9ba4.js";import{m as M}from"./management-view-utils.mod.1f11836e.js";import{_ as k}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.5b561da9.js";import"./MoImageUploader.28d4cc1a.js";const U=n=>(Vue.pushScopeId("data-v-fa264ffc"),n=n(),Vue.popScopeId(),n),A={class:"mo-category-management"},B=U(()=>Vue.createElementVNode("picture",null,null,-1)),O={__name:"MoCategoryManagement",setup(n){const l=Vue.ref(),u=Vue.ref(),s=Vue.ref(0),{model:p,listData:c,handleOpenAddOrUpdateDialog:d,handleSearch:_,handleAddOrUpdate:g,handleRemove:f,handleRemoveBatch:h,refresh:i}=M.create({service:V,addOrUpdateComponent:u,listComponent:l});Vue.watch(c,()=>{s.value++});const C=t=>{V.status(t.id).then(a=>{a.data.status!==t.status?(t.status=!t.status,ElementPlus.ElMessage({message:"\u6807\u7B7E\u72B6\u6001\u66F4\u65B0\u5931\u8D25!",type:"error"})):ElementPlus.ElMessage({message:t.status?"\u5DF2\u542F\u7528":"\u5DF2\u7981\u7528",type:t.status?"success":"error"})}).catch(a=>{t.status=!t.status})};return(async()=>i(1))(),(t,a)=>{const o=Vue.resolveComponent("el-table-column"),w=Vue.resolveComponent("el-icon"),y=Vue.resolveComponent("el-image"),v=Vue.resolveComponent("el-switch"),m=Vue.resolveComponent("el-button"),x=Vue.resolveComponent("el-table");return Vue.openBlock(),Vue.createElementBlock("div",A,[Vue.createVNode(N,{model:Vue.unref(p),onAdd:a[0]||(a[0]=e=>Vue.unref(d)()),onRemoveBatch:Vue.unref(h),onSearch:Vue.unref(_),onChangePage:Vue.unref(i)},{list:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createBlock(x,{class:"mo-category-management__list",ref_key:"tableComponent",ref:l,key:s.value,data:Vue.unref(c),height:"100%"},{default:Vue.withCtx(()=>[Vue.createVNode(o,{type:"selection",width:"55"}),Vue.createVNode(o,{label:"#",type:"index",width:"50"}),Vue.createVNode(o,{label:"\u540D\u79F0",property:"name",width:"120"}),Vue.createVNode(o,{label:"\u63CF\u8FF0",property:"description","show-overflow-tooltip":""}),Vue.createVNode(o,{label:"\u5305\u542B\u6587\u7AE0\u6570\u91CF",property:"articleAmount",align:"center",width:"130"}),Vue.createVNode(o,{label:"\u56FE\u7247",property:"image",align:"center",width:"130"},{default:Vue.withCtx(e=>[Vue.createVNode(y,{class:"mo-category-management__image",src:e.row.image?e.row.image:void 0,"preview-src-list":[e.row.image],"initial-index":0,"preview-teleported":!0},{error:Vue.withCtx(()=>[Vue.createVNode(w,null,{default:Vue.withCtx(()=>[B]),_:1})]),_:2},1032,["src","preview-src-list"])]),_:1}),Vue.createVNode(o,{label:"\u72B6\u6001",property:"status",align:"center",width:"120"},{default:Vue.withCtx(e=>[Vue.createVNode(v,{class:"mo-category-management__status ml-2",modelValue:e.row.status,"onUpdate:modelValue":r=>e.row.status=r,onChange:r=>C(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),Vue.createVNode(o,{label:"\u64CD\u4F5C",align:"center",width:"140"},{default:Vue.withCtx(e=>[Vue.createVNode(m,{type:"primary",size:"small",onClick:r=>Vue.unref(d)(e.row.id)},{default:Vue.withCtx(()=>[Vue.createTextVNode("\u66F4\u65B0")]),_:2},1032,["onClick"]),Vue.createVNode(m,{type:"danger",size:"small",onClick:r=>Vue.unref(f)(e.row.id)},{default:Vue.withCtx(()=>[Vue.createTextVNode("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]))]),dialog:Vue.withCtx(()=>[Vue.createVNode(b,{ref_key:"tagAddOrUpdateComponent",ref:u,onConfirm:Vue.unref(g)},null,8,["onConfirm"])]),_:1},8,["model","onRemoveBatch","onSearch","onChangePage"])])}}},D=k(O,[["__scopeId","data-v-fa264ffc"]]);export{D as default};
