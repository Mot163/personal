import A from"./MoArticleColumn.f0f5e02f.js";import{a as T}from"./article-service.mod.9ac4e188.js";import{c as D}from"./category-service.mod.aa5a9ba4.js";import{t as U}from"./tag-service.mod.774d7a87.js";import{m as P}from"./management-view-utils.mod.1f11836e.js";import{_ as Y}from"./_plugin-vue_export-helper.cdc0426e.js";import"./MoIcon.a8ae075d.js";import"./store.mod.8d7d9c48.js";import"./index.5b561da9.js";const z={class:"mo-article-management"},F={key:1},R={__name:"MoArticleManagement",emits:["open-tab"],setup(K,{emit:g}){const f=Vue.getCurrentInstance().type.__scopeId,n=Vue.reactive({yearMonth:"",categoryId:"",tabIds:[],key:"",startTime:Vue.computed(()=>{if(!!n.yearMonth)return`${n.yearMonth}-01`}),endTime:Vue.computed(()=>{if(!n.yearMonth)return;const t=n.yearMonth.split("-");let e,a=Number(t[1]);return a++,a>12?(e=String(Number(t[0])+1),a="01"):(e=t[0],a=a>9?String(a):`0${a}`),`${e}-${a}-01`})}),r=Vue.reactive([]),u=Vue.reactive([]),{model:m,listData:c,handleSearch:s,handleRemove:h,refresh:V}=P.create({service:T}),v=t=>{i(`\u6D4F\u89C8-${t.title.substring(0,3)}...`,"content-management/article-management/MoArticleView",{articleId:t.id},t.id)},C=t=>{i(`\u7F16\u8F91-${t.title.substring(0,3)}...`,"article-publish/MoPublishArticle",{articleId:t.id},t.id)},y=t=>t.getTime()>Date.now(),k=()=>{D.simpleList().then(t=>{r.splice(0,r.length),t.data.map(e=>r.push(e))}).catch(t=>{})},b=()=>{U.simpleList().then(t=>{u.splice(0,u.length),t.data.map(e=>u.push(e))}).catch(t=>{})},w=t=>{V(t),document.querySelector(`.mo-article-management__main[${f}]`).scrollTop=0},i=(t,e,a,l)=>g("open-tab",{title:t,componentName:e,params:a,multipleId:l});return(async()=>(k(),b(),V(1)))(),(t,e)=>{const a=Vue.resolveComponent("el-date-picker"),l=Vue.resolveComponent("el-form-item"),d=Vue.resolveComponent("el-option"),p=Vue.resolveComponent("el-select"),N=Vue.resolveComponent("el-input"),x=Vue.resolveComponent("el-icon"),_=Vue.resolveComponent("el-button"),M=Vue.resolveComponent("el-form"),B=Vue.resolveComponent("el-header"),I=Vue.resolveComponent("el-empty"),S=Vue.resolveComponent("el-main"),$=Vue.resolveComponent("el-pagination"),E=Vue.resolveComponent("el-footer"),L=Vue.resolveComponent("el-container");return Vue.openBlock(),Vue.createElementBlock("div",z,[Vue.createVNode(L,{class:"mo-article-management__container"},{default:Vue.withCtx(()=>[Vue.createVNode(B,{class:"mo-article-management__header"},{default:Vue.withCtx(()=>[Vue.createVNode(M,{class:"mo-article-management__form",model:n,inline:!0,onSubmit:e[6]||(e[6]=Vue.withModifiers(()=>{},["prevent"]))},{default:Vue.withCtx(()=>[Vue.createVNode(l,{class:"mo-article-management__form-item"},{default:Vue.withCtx(()=>[Vue.createVNode(a,{class:"mo-article-management__date-picker",modelValue:n.yearMonth,"onUpdate:modelValue":e[0]||(e[0]=o=>n.yearMonth=o),type:"month",placeholder:"\u6587\u7AE0\u5E74\u6708","disabled-date":y,"value-format":"YYYY-MM"},null,8,["modelValue"])]),_:1}),Vue.createVNode(l,{class:"mo-article-management__form-item"},{default:Vue.withCtx(()=>[Vue.createVNode(p,{class:"mo-article-management__select",modelValue:n.categoryId,"onUpdate:modelValue":e[1]||(e[1]=o=>n.categoryId=o),placeholder:"\u6587\u7AE0\u5206\u7C7B",clearable:""},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(r,o=>(Vue.openBlock(),Vue.createBlock(d,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Vue.createVNode(l,{class:"mo-article-management__form-item"},{default:Vue.withCtx(()=>[Vue.createVNode(p,{class:"mo-article-management__select--multiple",modelValue:n.tabIds,"onUpdate:modelValue":e[2]||(e[2]=o=>n.tabIds=o),placeholder:"\u6587\u7AE0\u6807\u7B7E","multiple-limit":3,multiple:"","collapse-tags":"","collapse-tags-tooltip":"",clearable:""},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(u,o=>(Vue.openBlock(),Vue.createBlock(d,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Vue.createVNode(l,{class:"mo-article-management__form-item mo-article-management__form-item--input"},{default:Vue.withCtx(()=>[Vue.createVNode(N,{class:"mo-article-management__input",modelValue:n.key,"onUpdate:modelValue":e[3]||(e[3]=o=>n.key=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",maxlength:"100",clearable:"",onKeyup:e[4]||(e[4]=Vue.withKeys(o=>Vue.unref(s)(n),["enter","native"]))},null,8,["modelValue"])]),_:1}),Vue.createVNode(l,{class:"mo-article-management__form-item"},{default:Vue.withCtx(()=>[Vue.createVNode(_,{type:"primary",round:"",onClick:e[5]||(e[5]=o=>Vue.unref(s)(n))},{default:Vue.withCtx(()=>[Vue.createVNode(x,null,{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlusIconsVue.Search))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),Vue.createVNode(S,{class:"mo-article-management__main"},{default:Vue.withCtx(()=>[Vue.unref(c).length>0?(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,{key:0},Vue.renderList(Vue.unref(c),o=>(Vue.openBlock(),Vue.createElementBlock("div",{key:o.id},[Vue.createVNode(A,{model:o,onView:v,onEdit:C,onRemove:Vue.unref(h)},null,8,["model","onRemove"])]))),128)):(Vue.openBlock(),Vue.createElementBlock("div",F,[Vue.createVNode(I,{description:"\u6CA1\u6709\u627E\u5230\u7B26\u5408\u6761\u4EF6\u7684\u6570\u636E\uFF01"},{default:Vue.withCtx(()=>[Vue.createVNode(_,{type:"primary",onClick:e[7]||(e[7]=o=>i("\u53D1\u5E03\u6587\u7AE0","article-publish/MoPublishArticle",{},Date.now()))},{default:Vue.withCtx(()=>[Vue.createTextVNode("\u53D1\u5E03\u6587\u7AE0")]),_:1})]),_:1})]))]),_:1}),Vue.createVNode(E,{class:"mo-article-management__footer"},{default:Vue.withCtx(()=>[Vue.createVNode($,{class:"mo-article-management__pagination",layout:"prev, pager, next","page-size":Vue.unref(m).pageSize,"current-page":Vue.unref(m).page,total:Vue.unref(m).total,"hide-on-single-page":!0,onCurrentChange:w},null,8,["page-size","current-page","total"])]),_:1})]),_:1})])}}},Z=Y(R,[["__scopeId","data-v-275fa01c"]]);export{Z as default};
